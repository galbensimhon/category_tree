{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport _ from 'lodash';\nimport { renameChild, getFatherPath, getOldNodePath, getItemsContextMenu } from '../utills/utills';\nimport Node from \"./Node.js\";\nimport { FILE, FOLDER } from \"../utills/constants\";\nimport { useHistory } from 'react-router-dom';\nimport Tree from \"./Tree\";\nimport queryString from 'query-string';\nconst data = {\n  '/root': {\n    path: '/root',\n    type: FOLDER,\n    isRoot: true,\n    isOpen: false,\n    children: ['/root/gal', '/root/ben']\n  },\n  '/root2': {\n    path: '/root2',\n    type: FOLDER,\n    isRoot: true,\n    isOpen: false,\n    children: ['/root2/gal2']\n  },\n  '/root2/gal2': {\n    path: '/root/gal2',\n    type: FOLDER,\n    isRoot: false,\n    isOpen: false,\n    children: []\n  },\n  '/root/gal': {\n    path: '/root/gal',\n    type: FOLDER,\n    isOpen: false,\n    children: ['/root/gal/read.txt']\n  },\n  '/root/ben': {\n    path: '/root/ben',\n    type: FOLDER,\n    isOpen: false,\n    children: []\n  },\n  '/root/gal/read.txt': {\n    path: '/root/gal/read.txt',\n    type: FILE,\n    isOpen: false\n  }\n};\nexport function CategoryTree(props) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n\n  const newSearchClicked = () => {\n    history.push(`${process.env.PUBLIC_URL}/`);\n  };\n\n  const fetchTree = async id => {\n    //let res = await fetch(`${SITE}/calculate_tree?treeid=${id}`);\n    //return await res.json();\n    return await data.json();\n  };\n\n  useEffect(() => {\n    const onFirstRender = async () => {\n      setLoading(true);\n      let parsed = queryString.parse(window.location.search);\n\n      if (!parsed || !parsed.id) {\n        alert('problem with getting category tree..');\n        history.push(`${process.env.PUBLIC_URL}/`);\n        return;\n      }\n\n      let tree_data = await fetchTree(parsed.id, parsed.allcourses);\n\n      if (!tree_data) {\n        alert('problem with connecting to server. please try again later');\n        history.push(`${process.env.PUBLIC_URL}/`);\n        return;\n      }\n\n      if (!tree_data.children || tree_data.children.length === 0) {\n        const url = `${ug_course_url}/${tree_data.number}`;\n        setCurrentCourse(tree_data.name);\n        setCurrentCourseUrl(url);\n        setEmptyTree(true);\n      }\n\n      let res = buildTree(tree_data, true);\n      setTreeData(res);\n      window.addEventListener('resize', centerTree);\n      setLoading(false);\n    };\n\n    onFirstRender();\n  }, [history]);\n}\n\n_s(CategoryTree, \"gNIai0K2cVCGnEPb2sBCqdnFnlY=\", false, function () {\n  return [useHistory];\n});\n\n_c = CategoryTree;\nexport default CategoryTree;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryTree\");","map":{"version":3,"sources":["C:/Users/Gal/WebstormProjects/CategoryTree/my-react-app/src/components/CategoryTree.js"],"names":["React","useEffect","useState","_","renameChild","getFatherPath","getOldNodePath","getItemsContextMenu","Node","FILE","FOLDER","useHistory","Tree","queryString","data","path","type","isRoot","isOpen","children","CategoryTree","props","loading","setLoading","history","newSearchClicked","push","process","env","PUBLIC_URL","fetchTree","id","json","onFirstRender","parsed","parse","window","location","search","alert","tree_data","allcourses","length","url","ug_course_url","number","setCurrentCourse","name","setCurrentCourseUrl","setEmptyTree","res","buildTree","setTreeData","addEventListener","centerTree"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAAQC,WAAR,EAAqBC,aAArB,EAAoCC,cAApC,EAAoDC,mBAApD,QAA8E,kBAA9E;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAAQC,IAAR,EAAcC,MAAd,QAA2B,qBAA3B;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AAIA,MAAMC,IAAI,GAAG;AACT,WAAS;AACLC,IAAAA,IAAI,EAAE,OADD;AAELC,IAAAA,IAAI,EAAEN,MAFD;AAGLO,IAAAA,MAAM,EAAE,IAHH;AAILC,IAAAA,MAAM,EAAE,KAJH;AAKLC,IAAAA,QAAQ,EAAE,CAAC,WAAD,EAAc,WAAd;AALL,GADA;AAQT,YAAU;AACNJ,IAAAA,IAAI,EAAE,QADA;AAENC,IAAAA,IAAI,EAAEN,MAFA;AAGNO,IAAAA,MAAM,EAAE,IAHF;AAINC,IAAAA,MAAM,EAAE,KAJF;AAKNC,IAAAA,QAAQ,EAAE,CAAC,aAAD;AALJ,GARD;AAeT,iBAAe;AACXJ,IAAAA,IAAI,EAAE,YADK;AAEXC,IAAAA,IAAI,EAAEN,MAFK;AAGXO,IAAAA,MAAM,EAAE,KAHG;AAIXC,IAAAA,MAAM,EAAE,KAJG;AAKXC,IAAAA,QAAQ,EAAE;AALC,GAfN;AAsBT,eAAa;AACTJ,IAAAA,IAAI,EAAE,WADG;AAETC,IAAAA,IAAI,EAAEN,MAFG;AAGTQ,IAAAA,MAAM,EAAE,KAHC;AAITC,IAAAA,QAAQ,EAAE,CAAC,oBAAD;AAJD,GAtBJ;AA4BT,eAAa;AACTJ,IAAAA,IAAI,EAAE,WADG;AAETC,IAAAA,IAAI,EAAEN,MAFG;AAGTQ,IAAAA,MAAM,EAAE,KAHC;AAITC,IAAAA,QAAQ,EAAE;AAJD,GA5BJ;AAkCT,wBAAsB;AAClBJ,IAAAA,IAAI,EAAE,oBADY;AAElBC,IAAAA,IAAI,EAAEP,IAFY;AAGlBS,IAAAA,MAAM,EAAE;AAHU;AAlCb,CAAb;AAyCA,OAAO,SAASE,YAAT,CAAsBC,KAAtB,EAA6B;AAAA;;AAChC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBrB,QAAQ,CAAC,KAAD,CAAtC;AAEA,QAAMsB,OAAO,GAAGb,UAAU,EAA1B;;AAEA,QAAMc,gBAAgB,GAAG,MAAM;AAC3BD,IAAAA,OAAO,CAACE,IAAR,CAAc,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,GAAvC;AACH,GAFD;;AAIA,QAAMC,SAAS,GAAG,MAAOC,EAAP,IAAc;AAC5B;AACA;AACA,WAAO,MAAMjB,IAAI,CAACkB,IAAL,EAAb;AACH,GAJD;;AAMA/B,EAAAA,SAAS,CAAE,MAAM;AACb,UAAMgC,aAAa,GAAG,YAAY;AAC9BV,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAIW,MAAM,GAAGrB,WAAW,CAACsB,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAlC,CAAb;;AACA,UAAG,CAACJ,MAAD,IAAW,CAACA,MAAM,CAACH,EAAtB,EAAyB;AACrBQ,QAAAA,KAAK,CAAC,sCAAD,CAAL;AACAf,QAAAA,OAAO,CAACE,IAAR,CAAc,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,GAAvC;AACA;AACH;;AACD,UAAIW,SAAS,GAAG,MAAMV,SAAS,CAACI,MAAM,CAACH,EAAR,EAAYG,MAAM,CAACO,UAAnB,CAA/B;;AACA,UAAG,CAACD,SAAJ,EAAc;AACVD,QAAAA,KAAK,CAAC,2DAAD,CAAL;AACAf,QAAAA,OAAO,CAACE,IAAR,CAAc,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,GAAvC;AACA;AACH;;AACD,UAAG,CAACW,SAAS,CAACrB,QAAX,IAAuBqB,SAAS,CAACrB,QAAV,CAAmBuB,MAAnB,KAA8B,CAAxD,EAA0D;AACtD,cAAMC,GAAG,GAAI,GAAEC,aAAc,IAAGJ,SAAS,CAACK,MAAO,EAAjD;AACAC,QAAAA,gBAAgB,CAACN,SAAS,CAACO,IAAX,CAAhB;AACAC,QAAAA,mBAAmB,CAACL,GAAD,CAAnB;AACAM,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AACD,UAAIC,GAAG,GAAGC,SAAS,CAACX,SAAD,EAAY,IAAZ,CAAnB;AACAY,MAAAA,WAAW,CAACF,GAAD,CAAX;AACAd,MAAAA,MAAM,CAACiB,gBAAP,CAAwB,QAAxB,EAAkCC,UAAlC;AACA/B,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAxBD;;AA0BAU,IAAAA,aAAa;AAChB,GA5BQ,EA4BN,CAACT,OAAD,CA5BM,CAAT;AA8BH;;GA7CeJ,Y;UAGIT,U;;;KAHJS,Y;AA+ChB,eAAeA,YAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport _ from 'lodash';\r\nimport {renameChild, getFatherPath, getOldNodePath, getItemsContextMenu} from '../utills/utills'\r\nimport Node from \"./Node.js\";\r\nimport {FILE, FOLDER} from \"../utills/constants\";\r\nimport {useHistory} from 'react-router-dom'\r\nimport Tree from \"./Tree\";\r\nimport queryString from 'query-string'\r\n\r\n\r\n\r\nconst data = {\r\n    '/root': {\r\n        path: '/root',\r\n        type: FOLDER,\r\n        isRoot: true,\r\n        isOpen: false,\r\n        children: ['/root/gal', '/root/ben']\r\n    },\r\n    '/root2': {\r\n        path: '/root2',\r\n        type: FOLDER,\r\n        isRoot: true,\r\n        isOpen: false,\r\n        children: ['/root2/gal2']\r\n    },\r\n    '/root2/gal2': {\r\n        path: '/root/gal2',\r\n        type: FOLDER,\r\n        isRoot: false,\r\n        isOpen: false,\r\n        children: []\r\n    },\r\n    '/root/gal': {\r\n        path: '/root/gal',\r\n        type: FOLDER,\r\n        isOpen: false,\r\n        children: ['/root/gal/read.txt']\r\n    },\r\n    '/root/ben': {\r\n        path: '/root/ben',\r\n        type: FOLDER,\r\n        isOpen: false,\r\n        children: []\r\n    },\r\n    '/root/gal/read.txt': {\r\n        path: '/root/gal/read.txt',\r\n        type: FILE,\r\n        isOpen: false,\r\n    }\r\n}\r\n\r\nexport function CategoryTree(props) {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const history = useHistory();\r\n\r\n    const newSearchClicked = () => {\r\n        history.push(`${process.env.PUBLIC_URL}/`);\r\n    }\r\n\r\n    const fetchTree = async (id) => {\r\n        //let res = await fetch(`${SITE}/calculate_tree?treeid=${id}`);\r\n        //return await res.json();\r\n        return await data.json();\r\n    }\r\n\r\n    useEffect( () => {\r\n        const onFirstRender = async () => {\r\n            setLoading(true);\r\n            let parsed = queryString.parse(window.location.search);\r\n            if(!parsed || !parsed.id){\r\n                alert('problem with getting category tree..');\r\n                history.push(`${process.env.PUBLIC_URL}/`);\r\n                return;\r\n            }\r\n            let tree_data = await fetchTree(parsed.id, parsed.allcourses);\r\n            if(!tree_data){\r\n                alert('problem with connecting to server. please try again later');\r\n                history.push(`${process.env.PUBLIC_URL}/`);\r\n                return;\r\n            }\r\n            if(!tree_data.children || tree_data.children.length === 0){\r\n                const url = `${ug_course_url}/${tree_data.number}`;\r\n                setCurrentCourse(tree_data.name);\r\n                setCurrentCourseUrl(url);\r\n                setEmptyTree(true);\r\n            }\r\n            let res = buildTree(tree_data, true);\r\n            setTreeData(res);\r\n            window.addEventListener('resize', centerTree);\r\n            setLoading(false);\r\n        }\r\n\r\n        onFirstRender();\r\n    }, [history]);\r\n\r\n}\r\n\r\nexport default CategoryTree;\r\n"]},"metadata":{},"sourceType":"module"}