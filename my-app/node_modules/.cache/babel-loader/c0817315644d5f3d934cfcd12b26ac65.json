{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Gal\\\\WebstormProjects\\\\CategoryTree\\\\my-react-app\\\\src\\\\components\\\\CategoryTree.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport _ from 'lodash';\nimport { renameChild, getFatherPath, getOldNodePath, getItemsContextMenu } from '../utills/utills';\nimport Node from \"./Node.js\";\nimport { FILE, FOLDER } from \"../utills/constants\";\nimport { useHistory } from 'react-router-dom';\nimport Tree from \"./Tree\";\nimport queryString from 'query-string';\nimport { Button, Container, Typography } from \"@material-ui/core\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nconst data = {\n  '/root': {\n    path: '/root',\n    type: FOLDER,\n    isRoot: true,\n    isOpen: false,\n    children: ['/root/gal', '/root/ben']\n  },\n  '/root2': {\n    path: '/root2',\n    type: FOLDER,\n    isRoot: true,\n    isOpen: false,\n    children: ['/root2/gal2']\n  },\n  '/root2/gal2': {\n    path: '/root/gal2',\n    type: FOLDER,\n    isRoot: false,\n    isOpen: false,\n    children: []\n  },\n  '/root/gal': {\n    path: '/root/gal',\n    type: FOLDER,\n    isOpen: false,\n    children: ['/root/gal/read.txt']\n  },\n  '/root/ben': {\n    path: '/root/ben',\n    type: FOLDER,\n    isOpen: false,\n    children: []\n  },\n  '/root/gal/read.txt': {\n    path: '/root/gal/read.txt',\n    type: FILE,\n    isOpen: false\n  }\n};\nexport function CategoryTree(props) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [treeData, setTreeData] = useState(null);\n  const history = useHistory();\n\n  const newSearchClicked = () => {\n    history.push(`${process.env.PUBLIC_URL}/`);\n  };\n\n  const fetchTree = async id => {\n    //let res = await fetch(`${process.env.PUBLIC_URL}/calculate_tree?treeid=${id}`);\n    //return await res.json();\n    let new_data = _.filter(_.values(data), node => {\n      return node.startsWith(id);\n    });\n\n    return await new_data.json(); //return await data.json();\n  };\n\n  useEffect(() => {\n    const onFirstRender = async () => {\n      setLoading(true);\n      let parsed = queryString.parse(window.location.search);\n\n      if (!parsed || !parsed.id) {\n        alert('problem with getting category tree..');\n        history.push(`${process.env.PUBLIC_URL}/`);\n        return;\n      }\n\n      let tree_data = await fetchTree(parsed.id);\n\n      if (!tree_data) {\n        alert('problem with getting category tree.\\n the id which given is not found..');\n        history.push(`${process.env.PUBLIC_URL}/`);\n        return;\n      } //let res = buildTree(tree_data, true);\n\n\n      setTreeData(tree_data); //window.addEventListener('resize', centerTree);\n\n      setLoading(false);\n    };\n\n    onFirstRender();\n  }, [history]);\n\n  const LoadingComponent = () => /*#__PURE__*/_jsxDEV(Grid, {\n    item: true,\n    container: true,\n    justify: 'center',\n    xs: 12,\n    style: {\n      minHeight: 500\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      style: {\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          justifyItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            marginBottom: '10px'\n          },\n          variant: \"h5\",\n          align: \"center\",\n          color: \"textPrimary\",\n          children: \"Loading tree...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CircularProgress, {\n          style: {\n            margin: 'auto'\n          },\n          color: 'primary'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: main_container_ref,\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: 'sm',\n      className: classes.tree,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        className: classes.control_panel,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          spacing: 0,\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              align: \"center\",\n              color: \"textPrimary\",\n              children: \"Control Pannel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            container: true,\n            justify: 'center',\n            xs: 12,\n            md: 12,\n            spacing: 0,\n            wrap: \"nowrap\",\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              arrow: true,\n              title: \"zoom in\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: zoomIn,\n                children: [\" \", /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n                  fontSize: \"large\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              arrow: true,\n              title: \"re-center tree\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: centerTree,\n                children: [\" \", /*#__PURE__*/_jsxDEV(CenterFocusStrongIcon, {\n                  fontSize: \"large\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 67\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              arrow: true,\n              title: \"zoom out\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: zoomOut,\n                children: [\" \", /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n                  fontSize: \"large\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 64\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), is_cell && is_fullscreen_enabled && /*#__PURE__*/_jsxDEV(Grid, {\n            style: {\n              marginBottom: theme.spacing(1)\n            },\n            item: true,\n            container: true,\n            justify: 'center',\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: toggleFullScreen,\n              variant: \"outlined\",\n              color: \"primary\",\n              children: \"fullScreen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            container: true,\n            justify: 'center',\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: gotoCourseClicked,\n              onMouseDown: onGotoMouseDown,\n              variant: \"text\",\n              color: \"primary\",\n              children: current_course === '' ? 'Clicking on node tree will give you a link' : `עבור אל ${current_course}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            className: classes.low_button,\n            item: true,\n            container: true,\n            justify: 'center',\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                justifySelf: 'center'\n              },\n              onClick: newSearchClicked,\n              variant: \"text\",\n              color: \"primary\",\n              children: \"new search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: 'xl',\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        onTouchStart: disableScroll,\n        onTouchEnd: enableScroll,\n        ref: tree_container_ref,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          className: classes.main_container,\n          children: loading ? /*#__PURE__*/_jsxDEV(LoadingComponent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 36\n          }, this) : empty_tree ? /*#__PURE__*/_jsxDEV(EmptyTreeComponent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 42\n          }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            className: classes.tree_container,\n            children: /*#__PURE__*/_jsxDEV(Tree, {\n              initialDepth: 1,\n              styles: theme.palette.type === 'dark' ? dark_styles : light_styles,\n              translate: dimensions,\n              data: tree_data,\n              orientation: 'vertical',\n              transitionDuration: 0,\n              separation: {\n                siblings: 1.9,\n                nonSiblings: 1.9\n              },\n              textLayout: {\n                textAnchor: \"start\",\n                x: 15,\n                y: 0,\n                transform: undefined\n              },\n              collapsible: true,\n              zoom: zoom,\n              onClick: nodeClicked\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CategoryTree, \"d59Vjw86UuDPL66kU4ceA20dt5w=\", false, function () {\n  return [useHistory];\n});\n\n_c = CategoryTree;\nexport default CategoryTree;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryTree\");","map":{"version":3,"sources":["C:/Users/Gal/WebstormProjects/CategoryTree/my-react-app/src/components/CategoryTree.js"],"names":["React","useEffect","useState","_","renameChild","getFatherPath","getOldNodePath","getItemsContextMenu","Node","FILE","FOLDER","useHistory","Tree","queryString","Button","Container","Typography","Paper","Grid","IconButton","Tooltip","CircularProgress","data","path","type","isRoot","isOpen","children","CategoryTree","props","loading","setLoading","treeData","setTreeData","history","newSearchClicked","push","process","env","PUBLIC_URL","fetchTree","id","new_data","filter","values","node","startsWith","json","onFirstRender","parsed","parse","window","location","search","alert","tree_data","LoadingComponent","minHeight","marginTop","display","flexDirection","justifyContent","justifyItems","marginBottom","margin","main_container_ref","classes","tree","control_panel","zoomIn","centerTree","zoomOut","is_cell","is_fullscreen_enabled","theme","spacing","toggleFullScreen","gotoCourseClicked","onGotoMouseDown","current_course","low_button","justifySelf","disableScroll","enableScroll","tree_container_ref","main_container","empty_tree","tree_container","palette","dark_styles","light_styles","dimensions","siblings","nonSiblings","textAnchor","x","y","transform","undefined","zoom","nodeClicked"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport _ from 'lodash';\r\nimport {renameChild, getFatherPath, getOldNodePath, getItemsContextMenu} from '../utills/utills'\r\nimport Node from \"./Node.js\";\r\nimport {FILE, FOLDER} from \"../utills/constants\";\r\nimport {useHistory} from 'react-router-dom'\r\nimport Tree from \"./Tree\";\r\nimport queryString from 'query-string'\r\nimport {Button, Container, Typography} from \"@material-ui/core\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst data = {\r\n    '/root': {\r\n        path: '/root',\r\n        type: FOLDER,\r\n        isRoot: true,\r\n        isOpen: false,\r\n        children: ['/root/gal', '/root/ben']\r\n    },\r\n    '/root2': {\r\n        path: '/root2',\r\n        type: FOLDER,\r\n        isRoot: true,\r\n        isOpen: false,\r\n        children: ['/root2/gal2']\r\n    },\r\n    '/root2/gal2': {\r\n        path: '/root/gal2',\r\n        type: FOLDER,\r\n        isRoot: false,\r\n        isOpen: false,\r\n        children: []\r\n    },\r\n    '/root/gal': {\r\n        path: '/root/gal',\r\n        type: FOLDER,\r\n        isOpen: false,\r\n        children: ['/root/gal/read.txt']\r\n    },\r\n    '/root/ben': {\r\n        path: '/root/ben',\r\n        type: FOLDER,\r\n        isOpen: false,\r\n        children: []\r\n    },\r\n    '/root/gal/read.txt': {\r\n        path: '/root/gal/read.txt',\r\n        type: FILE,\r\n        isOpen: false,\r\n    }\r\n}\r\n\r\nexport function CategoryTree(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [treeData, setTreeData] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    const newSearchClicked = () => {\r\n        history.push(`${process.env.PUBLIC_URL}/`);\r\n    }\r\n\r\n    const fetchTree = async (id) => {\r\n        //let res = await fetch(`${process.env.PUBLIC_URL}/calculate_tree?treeid=${id}`);\r\n        //return await res.json();\r\n        let new_data = _.filter(_.values(data), (node) => { return node.startsWith(id);});\r\n        return await new_data.json();\r\n        //return await data.json();\r\n    }\r\n\r\n    useEffect( () => {\r\n        const onFirstRender = async () => {\r\n            setLoading(true);\r\n            let parsed = queryString.parse(window.location.search);\r\n            if(!parsed || !parsed.id){\r\n                alert('problem with getting category tree..');\r\n                history.push(`${process.env.PUBLIC_URL}/`);\r\n                return;\r\n            }\r\n            let tree_data = await fetchTree(parsed.id);\r\n            if(!tree_data){\r\n                alert('problem with getting category tree.\\n the id which given is not found..');\r\n                history.push(`${process.env.PUBLIC_URL}/`);\r\n                return;\r\n            }\r\n            //let res = buildTree(tree_data, true);\r\n            setTreeData(tree_data);\r\n            //window.addEventListener('resize', centerTree);\r\n            setLoading(false);\r\n        }\r\n\r\n        onFirstRender();\r\n    }, [history]);\r\n\r\n    const LoadingComponent = () => (\r\n        <Grid item container  justify={'center'} xs={12} style={{minHeight: 500}} >\r\n            <Grid item xs={12} style={{marginTop: '10px'}}>\r\n                <div style={{display: 'flex', flexDirection:'column', justifyContent: 'center', justifyItems: 'center'}}>\r\n                    <Typography style={{marginBottom: '10px'}} variant=\"h5\" align=\"center\" color=\"textPrimary\" >\r\n                        Loading tree...\r\n                    </Typography>\r\n                    <CircularProgress style={{margin:'auto'}} color={'primary'}/>\r\n                </div>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n\r\n    return(\r\n        <div ref={main_container_ref}>\r\n            <Container maxWidth={'sm'} className={classes.tree}>\r\n                <Paper elevation={3} className={classes.control_panel}>\r\n                    <Grid spacing={0} container>\r\n                        <Grid item xs={12} >\r\n                            <Typography  variant=\"h5\" align=\"center\" color=\"textPrimary\" >\r\n                                Control Pannel\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Grid item container justify={'center'} xs={12} md={12} spacing={0} wrap={\"nowrap\"}>\r\n                            <Tooltip arrow title=\"zoom in\">\r\n                                <IconButton onClick={zoomIn}> <ZoomInIcon fontSize=\"large\"/></IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip arrow title=\"re-center tree\">\r\n                                <IconButton onClick={centerTree}> <CenterFocusStrongIcon fontSize=\"large\"/> </IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip arrow title=\"zoom out\">\r\n                                <IconButton onClick={zoomOut}> <ZoomOutIcon fontSize=\"large\"/> </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                        {is_cell && is_fullscreen_enabled && (\r\n                            <Grid style={{marginBottom : theme.spacing(1)}} item container justify={'center'} xs={12}>\r\n                                <Button onClick={toggleFullScreen} variant=\"outlined\" color=\"primary\">\r\n                                    fullScreen\r\n                                </Button>\r\n                            </Grid>\r\n                        )}\r\n                        <Grid item container justify={'center'} xs={12}>\r\n                            <Button onClick={gotoCourseClicked} onMouseDown={onGotoMouseDown} variant=\"text\" color=\"primary\">\r\n                                {current_course === '' ? ('Clicking on node tree will give you a link') : (`עבור אל ${current_course}`)}\r\n                            </Button>\r\n                        </Grid>\r\n                        <Grid className={classes.low_button} item container justify={'center'} xs={12}>\r\n                            <Button style={{justifySelf:'center'}} onClick={newSearchClicked} variant=\"text\" color=\"primary\">\r\n                                new search\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Container>\r\n            <Container maxWidth={'xl'}>\r\n                <Paper elevation={3} onTouchStart={disableScroll} onTouchEnd={enableScroll} ref = {tree_container_ref}>\r\n                    <Grid container className={classes.main_container}>\r\n                        {loading ? <LoadingComponent/> :\r\n                            empty_tree ? <EmptyTreeComponent/> :\r\n                                <Grid item xs={12} className={classes.tree_container}>\r\n                                    <Tree\r\n                                        initialDepth={1}\r\n                                        styles={theme.palette.type === 'dark'? dark_styles : light_styles}\r\n                                        translate={dimensions}\r\n                                        data={tree_data}\r\n                                        orientation={'vertical'}\r\n                                        transitionDuration={0}\r\n                                        separation={{siblings: 1.9, nonSiblings: 1.9}}\r\n                                        textLayout={{textAnchor: \"start\", x: 15, y: 0, transform: undefined }}\r\n                                        collapsible={true}\r\n                                        zoom={zoom}\r\n                                        onClick={nodeClicked}\r\n                                    />\r\n                                </Grid>\r\n                        }\r\n                    </Grid>\r\n                </Paper>\r\n            </Container>\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n\r\nexport default CategoryTree;\r\n"]},"metadata":{},"sourceType":"module"}