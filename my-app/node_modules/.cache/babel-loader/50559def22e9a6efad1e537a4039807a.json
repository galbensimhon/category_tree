{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport _ from 'lodash';\nimport { renameChild, getFatherPath, getOldNodePath, getItemsContextMenu } from '../utills/utills';\nimport Node from \"./Node.js\";\nimport { FILE, FOLDER } from \"../utills/constants\";\nimport { useHistory } from 'react-router-dom';\nimport Tree from \"./Tree\";\nconst data = {\n  '/root': {\n    path: '/root',\n    type: FOLDER,\n    isRoot: true,\n    isOpen: false,\n    children: ['/root/gal', '/root/ben']\n  },\n  '/root2': {\n    path: '/root2',\n    type: FOLDER,\n    isRoot: true,\n    isOpen: false,\n    children: ['/root2/gal2']\n  },\n  '/root2/gal2': {\n    path: '/root/gal2',\n    type: FOLDER,\n    isRoot: false,\n    isOpen: false,\n    children: []\n  },\n  '/root/gal': {\n    path: '/root/gal',\n    type: FOLDER,\n    isOpen: false,\n    children: ['/root/gal/read.txt']\n  },\n  '/root/ben': {\n    path: '/root/ben',\n    type: FOLDER,\n    isOpen: false,\n    children: []\n  },\n  '/root/gal/read.txt': {\n    path: '/root/gal/read.txt',\n    type: FILE,\n    isOpen: false\n  }\n};\nexport function CategoryTree(props) {\n  _s();\n\n  const history = useHistory();\n\n  const newSearchClicked = () => {\n    history.push(`${process.env.PUBLIC_URL}/`);\n  };\n\n  const fetchTree = async (num, is_all_courses) => {\n    //let res = await fetch(`${SITE}/calculate_tree?number=${num}&is_all_courses=${is_all_courses}`);\n    //return await res.json();\n    return await data.json();\n  };\n\n  useEffect(() => {\n    const onFirstRender = async () => {\n      setLoading(true);\n      centerTree();\n      let parsed = queryString.parse(window.location.search);\n\n      if (!parsed || !parsed.num) {\n        alert('problem with getting course number. please choose course again');\n        history.push(`${process.env.PUBLIC_URL}/`);\n        return;\n      }\n\n      if (!parsed.allcourses) {\n        alert('problem getting type of courses preferences. looking only at active courses by default');\n        parsed.allcourses = 'false';\n      }\n\n      let tree_data = await fetchTree(parsed.num, parsed.allcourses);\n\n      if (!tree_data) {\n        alert('problem with connecting to server. please try again later');\n        history.push(`${process.env.PUBLIC_URL}/`);\n        return;\n      }\n\n      if (!tree_data.children || tree_data.children.length === 0) {\n        const url = `${ug_course_url}/${tree_data.number}`;\n        setCurrentCourse(tree_data.name);\n        setCurrentCourseUrl(url);\n        setEmptyTree(true);\n      }\n\n      let res = buildTree(tree_data, true);\n      setTreeData(res);\n      window.addEventListener('resize', centerTree);\n      setLoading(false);\n    };\n\n    onFirstRender();\n  }, [history]);\n}\n\n_s(CategoryTree, \"bz2N+u0mX89LO9zOCfVCA9Sa20M=\", false, function () {\n  return [useHistory];\n});\n\n_c = CategoryTree;\nexport default CategoryTree;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryTree\");","map":{"version":3,"sources":["C:/Users/Gal/WebstormProjects/CategoryTree/my-react-app/src/components/CategoryTree.js"],"names":["React","useEffect","useState","_","renameChild","getFatherPath","getOldNodePath","getItemsContextMenu","Node","FILE","FOLDER","useHistory","Tree","data","path","type","isRoot","isOpen","children","CategoryTree","props","history","newSearchClicked","push","process","env","PUBLIC_URL","fetchTree","num","is_all_courses","json","onFirstRender","setLoading","centerTree","parsed","queryString","parse","window","location","search","alert","allcourses","tree_data","length","url","ug_course_url","number","setCurrentCourse","name","setCurrentCourseUrl","setEmptyTree","res","buildTree","setTreeData","addEventListener"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport _ from 'lodash';\r\nimport {renameChild, getFatherPath, getOldNodePath, getItemsContextMenu} from '../utills/utills'\r\nimport Node from \"./Node.js\";\r\nimport {FILE, FOLDER} from \"../utills/constants\";\r\nimport {useHistory} from 'react-router-dom'\r\nimport Tree from \"./Tree\";\r\n\r\n\r\nconst data = {\r\n    '/root': {\r\n        path: '/root',\r\n        type: FOLDER,\r\n        isRoot: true,\r\n        isOpen: false,\r\n        children: ['/root/gal', '/root/ben']\r\n    },\r\n    '/root2': {\r\n        path: '/root2',\r\n        type: FOLDER,\r\n        isRoot: true,\r\n        isOpen: false,\r\n        children: ['/root2/gal2']\r\n    },\r\n    '/root2/gal2': {\r\n        path: '/root/gal2',\r\n        type: FOLDER,\r\n        isRoot: false,\r\n        isOpen: false,\r\n        children: []\r\n    },\r\n    '/root/gal': {\r\n        path: '/root/gal',\r\n        type: FOLDER,\r\n        isOpen: false,\r\n        children: ['/root/gal/read.txt']\r\n    },\r\n    '/root/ben': {\r\n        path: '/root/ben',\r\n        type: FOLDER,\r\n        isOpen: false,\r\n        children: []\r\n    },\r\n    '/root/gal/read.txt': {\r\n        path: '/root/gal/read.txt',\r\n        type: FILE,\r\n        isOpen: false,\r\n    }\r\n}\r\n\r\nexport function CategoryTree(props) {\r\n    const history = useHistory();\r\n\r\n    const newSearchClicked = () => {\r\n        history.push(`${process.env.PUBLIC_URL}/`);\r\n    }\r\n\r\n    const fetchTree = async (num, is_all_courses) => {\r\n        //let res = await fetch(`${SITE}/calculate_tree?number=${num}&is_all_courses=${is_all_courses}`);\r\n        //return await res.json();\r\n        return await data.json();\r\n    }\r\n\r\n    useEffect( () => {\r\n        const onFirstRender = async () => {\r\n            setLoading(true);\r\n            centerTree();\r\n            let parsed = queryString.parse(window.location.search)\r\n            if(!parsed || !parsed.num){\r\n                alert('problem with getting course number. please choose course again');\r\n                history.push(`${process.env.PUBLIC_URL}/`);\r\n                return;\r\n            }\r\n            if(!parsed.allcourses){\r\n                alert('problem getting type of courses preferences. looking only at active courses by default');\r\n                parsed.allcourses = 'false'\r\n            }\r\n            let tree_data = await fetchTree(parsed.num, parsed.allcourses);\r\n            if(!tree_data){\r\n                alert('problem with connecting to server. please try again later');\r\n                history.push(`${process.env.PUBLIC_URL}/`);\r\n                return;\r\n            }\r\n            if(!tree_data.children || tree_data.children.length === 0){\r\n                const url = `${ug_course_url}/${tree_data.number}`;\r\n                setCurrentCourse(tree_data.name);\r\n                setCurrentCourseUrl(url);\r\n                setEmptyTree(true);\r\n            }\r\n            let res = buildTree(tree_data, true);\r\n            setTreeData(res);\r\n            window.addEventListener('resize', centerTree);\r\n            setLoading(false);\r\n        }\r\n\r\n        onFirstRender();\r\n    }, [history]);\r\n\r\n}\r\n\r\nexport default CategoryTree;\r\n"]},"metadata":{},"sourceType":"module"}